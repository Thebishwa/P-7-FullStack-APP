{"ast":null,"code":"import _regeneratorRuntime from \"/Users/bishwapaiyar42/Downloads/oc-project-7-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/bishwapaiyar42/Downloads/oc-project-7-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: \"My-profile\",\n  data: function data() {\n    return {\n      user: {\n        firstName: '',\n        lastName: '',\n        email: ''\n      },\n      showUpdateInput: false,\n      userUpdate: {\n        firstName: '',\n        lastName: '',\n        email: ''\n      }\n    };\n  },\n  methods: {\n    //////////////////////////////////////////////////////////////////////////////////////////\n    //update user - show input\n    toggle: function toggle() {\n      this.showUpdateInput = !this.showUpdateInput;\n    },\n    //////////////////////////////////////////////////////////////////////////////////////////\n    //update user - axios put\n    updateUser: function updateUser() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var user, url, updateUser;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                user = localStorage.userId;\n                url = \"api/user/profile/\".concat(user, \"/update\");\n                updateUser = {\n                  firstName: _this.userUpdate.firstName,\n                  lastName: _this.userUpdate.lastName,\n                  email: _this.userUpdate.email\n                };\n                _context.next = 5;\n                return axios.put(url, updateUser, {\n                  headers: {\n                    'Content-Type': 'application/json',\n                    Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n                  }\n                }).then(function (response) {\n                  var res = response.data;\n                  console.log(res);\n                  alert('User updated!');\n\n                  _this.$router.push('/home');\n                }).catch(function (error) {\n                  alert(error.message);\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    //////////////////////////////////////////////////////////////////////////////////////////\n    //delete user - axios delete\n    deleteUser: function deleteUser() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var user, url;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                user = localStorage.userId;\n                url = \"api/user/profile/\".concat(user, \"/delete\");\n                _context2.next = 4;\n                return axios.delete(url, {\n                  headers: {\n                    Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n                  }\n                }).then(function (response) {\n                  console.log(response);\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 4:\n                _this2.$router.push('/');\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var user, url;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              //////////////////////////////////////////////////////////////////////////////////////////\n              //get user data - axios get\n              user = localStorage.userId;\n              url = \"api/user/profile/\".concat(user);\n              _context3.next = 4;\n              return axios.get(url, {\n                headers: {\n                  Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n                }\n              }).then(function (response) {\n                var user = response.data;\n                _this3.user.firstName = user.firstName;\n                _this3.user.lastName = user.lastName;\n                _this3.user.email = user.email;\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AAEA;EACAA,kBADA;EAGAC,IAHA,kBAGA;IACA;MACAC;QACAC,aADA;QAEAC,YAFA;QAGAC;MAHA,CADA;MAMAC,sBANA;MAOAC;QACAJ,aADA;QAEAC,YAFA;QAGAC;MAHA;IAPA;EAaA,CAjBA;EAmBAG;IACA;IACA;IACAC,MAHA,oBAGA;MACA;IACA,CALA;IAOA;IACA;IACAC,UATA,wBASA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAR,IADA,GACAS,mBADA;gBAEAC,GAFA,8BAEAV,IAFA;gBAGAQ,UAHA,GAGA;kBACAP,qCADA;kBAEAC,mCAFA;kBAGAC;gBAHA,CAHA;gBAAA;gBAAA,OAQAQ;kBACAC;oBACA,kCADA;oBAEAC;kBAFA;gBADA,GAMAC,IANA,CAMA;kBACA;kBACAC;kBACAC;;kBACA;gBACA,CAXA,EAYAC,KAZA,CAYA;kBACAD;gBACA,CAdA,CARA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAwBA,CAjCA;IAmCA;IACA;IACAE,UArCA,wBAqCA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAlB,IADA,GACAS,mBADA;gBAEAC,GAFA,8BAEAV,IAFA;gBAAA;gBAAA,OAGAW;kBACAC;oBACAC;kBADA;gBADA,GAIAC,IAJA,CAIA;kBACAC;gBACA,CANA,EAMAE,KANA,CAMA;kBACAF;gBACA,CARA,CAHA;;cAAA;gBAYA;;cAZA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAaA;EAlDA,CAnBA;EAyEAI,OAzEA,qBAyEA;IAAA;;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;cACA;cACAnB,IAHA,GAGAS,mBAHA;cAIAC,GAJA,8BAIAV,IAJA;cAAA;cAAA,OAKAW;gBACAC;kBACAC;gBADA;cADA,GAIAC,IAJA,CAIA;gBACA;gBACA;gBACA;gBACA;cACA,CATA,EASAG,KATA,CASA;gBACAF;cACA,CAXA,CALA;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAiBA;AA1FA","names":["name","data","user","firstName","lastName","email","showUpdateInput","userUpdate","methods","toggle","updateUser","localStorage","url","axios","headers","Authorization","then","console","alert","catch","deleteUser","mounted"],"sourceRoot":"src/components","sources":["Profile.vue"],"sourcesContent":["<template>\n  <section>\n    <div class=\"profile\" v-if=\"user.firstName\">\n      <h3>Profile</h3>\n      <br>\n      <form>\n        <label class=\"userInfo-label\" for=\"firstName\">Name</label> \n        <div class=\"userInfo\" v-if=\"showUpdateInput==false\">{{ user.firstName }}</div>\n        <div class=\"userUpdate\" v-if=\"showUpdateInput==true\">  \n          <input \n            type=\"text\"\n            name=\"firstName\"\n            class=\"userUpdate\"\n            v-model=\"userUpdate.firstName\"\n            placeholder=\"Update your name...\"\n            required/>\n        </div>\n        <label class=\"userInfo-label\" for=\"lastName\">Last Name</label> \n        <div class=\"userInfo\" v-if=\"showUpdateInput==false\">{{ user.lastName }}</div>\n        <div class=\"userUpdate\" v-if=\"showUpdateInput==true\">  \n          <input\n            type=\"text\"\n            name=\"lastName\"\n            class=\"userUpdate\"\n            v-model=\"userUpdate.lastName\"\n            placeholder=\"Update your last name...\"\n            required/>\n        </div>\n        <label class=\"userInfo-label\" for=\"email\">Email</label>\n        <div class=\"userInfo\" v-if=\"showUpdateInput==false\">{{ user.email }}</div>\n        <div class=\"userUpdate\" v-if=\"showUpdateInput==true\"> \n          <input\n            type=\"email\"\n            name=\"email\"\n            class=\"userUpdate\"\n            v-model=\"userUpdate.email\"\n            placeholder=\"Update your email...\"\n            required/>\n        </div>\n      </form>\n      <div>\n        <div class=\"profile-btn\">\n          <button @click=\"toggle()\" v-if=\"showUpdateInput==false\">Update</button>\n          <button @click=\"updateUser()\" v-if=\"showUpdateInput==true\" id=\"confirmButton\">Confirm</button>\n          <button @click=\"toggle()\" v-if=\"showUpdateInput==true\" id=\"backButton\">Back</button>\n          <button id=\"delete-button\" @click=\"deleteUser()\" v-if=\"showUpdateInput==false\">Delete</button>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\n\nimport axios from 'axios';\n\nexport default {\n  name: \"My-profile\",\n\n  data() {\n    return {\n      user: {\n        firstName: '',\n        lastName: '',\n        email: '',\n      },\n      showUpdateInput:false,\n      userUpdate :{\n        firstName: '',\n        lastName: '',\n        email: '',\n      }\n    };\n  },\n\n  methods:{\n    //////////////////////////////////////////////////////////////////////////////////////////\n    //update user - show input\n    toggle() {\n      this.showUpdateInput = !this.showUpdateInput\n    },\n\n    //////////////////////////////////////////////////////////////////////////////////////////\n    //update user - axios put\n    async updateUser(){\n      const user = localStorage.userId\n      const url = `api/user/profile/${user}/update`\n      const updateUser = { \n        firstName: this.userUpdate.firstName,\n        lastName: this.userUpdate.lastName,\n        email: this.userUpdate.email\n      }\n      await axios.put(url, updateUser, {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n        }\n      })\n      .then((response) => {\n        const res = response.data;\n        console.log(res);\n        alert('User updated!')\n        this.$router.push('/home')\n      })\n      .catch((error) => {\n        alert(error.message)\n      });\n      \n    },\n\n    //////////////////////////////////////////////////////////////////////////////////////////\n    //delete user - axios delete\n    async deleteUser(){\n      const user = localStorage.userId\n      const url = `api/user/profile/${user}/delete`\n      await axios.delete(url, {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n        }\n      }).then(response => {\n        console.log(response)\n      }).catch(error => {\n        console.log(error)\n      })\n      this.$router.push('/')\n    }\n  },\n\n  \n  async mounted() {\n    //////////////////////////////////////////////////////////////////////////////////////////\n    //get user data - axios get\n    const user = localStorage.userId\n    const url = `api/user/profile/${user}`\n    await axios.get(url, {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      }\n    }).then(response => {\n      let user = response.data\n      this.user.firstName = user.firstName\n      this.user.lastName = user.lastName\n      this.user.email = user.email\n    }).catch(error => {\n      console.log(error)\n    })\n  }\n\n};\n</script>\n\n<style>\n\n.profile {\n  justify-content: center;\n  align-items: center;\n  margin: auto;\n  margin-top: 250px;\n  min-height: 400px;\n  width: 40%;\n  max-width: 500px;\n  border-radius: 15px;\n  padding: 40px;\n  padding-top:50px;\n  background: #333;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.26);\n}\n\n.profile h3{\n  color: white;\n  border-bottom: 1px solid;\n  text-align: center;\n  padding-bottom: 20px;\n}\n\n.userInfo {\n  border: 1px solid black;\n  background: white;\n  min-height: 30px;\n  width: 90%;\n  max-width: 500px;\n  margin: auto;\n  margin-top: 5px;\n  margin-bottom: 25px;\n  border-radius: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  padding-bottom: 5px;\n}\n\n.userInfo-label {\n  padding-left: 20px;\n  min-height: 10px;\n  max-width: 500px;\n  width: 90%;\n  margin: auto;\n  font-size: medium;\n  color: white\n}\n\n.profile-btn {\n  min-height: 30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 70px;\n  margin-bottom: 30px;\n}\n\n.userUpdate {\n  text-align: center;\n}\n.userUpdate input {\n  background: white;\n  min-height: 30px;\n  width: 90%;\n  max-width: 500px;\n  margin: auto;\n  margin-top: 5px;\n  margin-bottom: 25px;\n  margin-right: 5px;\n  margin-left: 5px;\n  border-radius: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  padding-bottom: 5px;\n}\n\n#backButton{\n  background-color: #333;\n}\n\n#confirmButton{\n  background-color: #333;\n}\n\n#confirmButton:hover{\n  background-color: green;\n}\n\n@media only screen and (max-width: 768px) {\n  .profile {\n    width:75%;\n    margin-top:-20px;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}